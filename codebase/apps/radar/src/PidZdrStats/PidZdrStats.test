/**********************************************************************
 * TDRP params for PidZdrStats
 **********************************************************************/

//======================================================================
//
// PidZdrStats reads in Particle ID data from a CfRadial file, and 
//   computes the statistics of the ZDR distribution in various PID 
//   categories.
//
//======================================================================
 
//======================================================================
//
// Process control.
//
//======================================================================
 
//======================================================================
//
// DEBUGGING.
//
//======================================================================
 
///////////// debug ///////////////////////////////////
//
// Debug option.
//
// If set, debug messages will be printed appropriately.
//
//
// Type: enum
// Options:
//     DEBUG_OFF
//     DEBUG_NORM
//     DEBUG_VERBOSE
//     DEBUG_EXTRA
//

debug = DEBUG_OFF;

///////////// instance ////////////////////////////////
//
// Program instance for process registration.
//
// This application registers with procmap. This is the instance used 
//   for registration.
//
//
// Type: string
//

instance = "test";

//======================================================================
//
// DATA INPUT.
//
//======================================================================
 
///////////// input_dir ///////////////////////////////
//
// Input directory for searching for files.
//
// Files will be searched for in this directory.
//
//
// Type: string
//

input_dir = ".";

///////////// mode ////////////////////////////////////
//
// Operating mode.
//
// In REALTIME mode, the program waits for a new input file.  In ARCHIVE 
//   mode, it moves through the data between the start and end times set 
//   on the command line. In FILELIST mode, it moves through the list of 
//   file names specified on the command line. Paths (in ARCHIVE mode, at 
//   least) MUST contain a day-directory above the data file -- 
//   ./data_file.ext will not work as a file path, but 
//   ./yyyymmdd/data_file.ext will.
//
//
// Type: enum
// Options:
//     REALTIME
//     ARCHIVE
//     FILELIST
//

mode = REALTIME;

///////////// max_realtime_data_age_secs //////////////
//
// Maximum age of realtime data (secs).
//
// Only data less old than this will be used.
//
//
// Type: int
//

max_realtime_data_age_secs = 300;

//======================================================================
//
// INPUT FIELD NAMES.
//
//======================================================================
 
///////////// PID_field_name //////////////////////////
//
// Field name for Particle ID in the input file.
//
//
// Type: string
//

PID_field_name = "PID";

///////////// ZDR_field_name //////////////////////////
//
// Field name for ZDR in the input file.
//
//
// Type: string
//

ZDR_field_name = "ZDR";

///////////// RHOHV_field_name ////////////////////////
//
// Field name for RHOHV in the input file.
//
//
// Type: string
//

RHOHV_field_name = "RHOHV";

///////////// TEMP_field_name /////////////////////////
//
// Field name for temperature in the input file.
//
//
// Type: string
//

TEMP_field_name = "TEMP_FOR_PID";

//======================================================================
//
// MAX RANGE LIMIT.
//
//======================================================================
 
///////////// set_max_range ///////////////////////////
//
// Option to set the max range for any ray.
//
//
// Type: boolean
//

set_max_range = FALSE;

///////////// max_range_km ////////////////////////////
//
// Specified maximim range - km.
//
// Gates beyond this range are removed.
//
//
// Type: double
//

max_range_km = 9999;

//======================================================================
//
// GLOBAL PARAMETERS.
//
//======================================================================
 
///////////// pid_min_gate_run ////////////////////////
//
// Minimum consectutive gates with the correct conditions for analyzing 
//   ZDR.
//
// We want to ensure that we are solidly in a region suitable for 
//   analyzing the ZDR. We eliminate noisy data by requiring that the 
//   conditions persist over a certain number of gates.
//
//
// Type: int
//

pid_min_gate_run = 5;

///////////// pid_min_npoints_valid ///////////////////
//
// Minimum number of points in a volume for valid zdr stats.
//
// For the results to be valid, we need a certain number of valid 
//   results for computing the statistics.
//
//
// Type: int
//

pid_min_npoints_valid = 1000;

//======================================================================
//
// ZDR ANALYSIS BY PARTICLE TYPE.
//
//======================================================================
 
///////////// pid_regions /////////////////////////////
//
// Set up the PID regions for analysis.
//
// These limits are applied to each gate, depending on the PID 
//   identified for that gate. If the values read in are outside these 
//   limits, the gate is not used for the analysis. The PID value must be 
//   between 1 and 20, inclusive.
//
//
// Type: struct
//   typedef struct {
//      string label;
//      int pid;
//      double min_range_km;
//      double max_range_km;
//      double min_rhohv;
//      double max_rhohv;
//      double min_elev_deg;
//      double max_elev_deg;
//      double min_temp_c;
//      double max_temp_c;
//   }
//
// 1D array - variable length.
//

pid_regions = {
  {
    label = "cloud",
    pid = 1,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "drizzle",
    pid = 2,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "light_rain",
    pid = 3,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "mod_rain",
    pid = 4,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "heavy_rain",
    pid = 5,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "hail",
    pid = 6,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "rain_hail",
    pid = 7,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "graupel",
    pid = 8,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "rain_graupel",
    pid = 9,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "dry_snow",
    pid = 10,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "wet_snow",
    pid = 11,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "ice_crystals",
    pid = 12,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "irreg_ice",
    pid = 13,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
  ,
  {
    label = "supercooled_drops",
    pid = 14,
    min_range_km = 5,
    max_range_km = 148,
    min_rhohv = 0.95,
    max_rhohv = 1,
    min_elev_deg = 0,
    max_elev_deg = 90,
    min_temp_c = -100,
    max_temp_c = 50
  }
};

//======================================================================
//
// WRITE RESULTS OUT TO TEXT FILES.
//
//======================================================================
 
///////////// output_dir //////////////////////////////
//
// Output directory path.
//
// Text files will be written to this directory. A day directory will be 
//   added, so the file path will be 
//   output_text_dir/yyyymmdd/filename.txt.
//
//
// Type: string
//

output_dir = "/tmp/PidZdrStats";

