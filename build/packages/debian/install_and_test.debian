#! /bin/bash

os_version=$1
lrose_package=$2

#
# in clean docker image,
# install rpm and test that the apps work
#

cd ~/git/lrose-core/build/packages/debian

# remove any old image

docker rm image ${os_version}:install

# make rpms available to container

debDir=/tmp/${os_version}-${lrose-package}/debs
mkdir -p $debDir

# install the rpms in a container

docker build \
    -v ${debDir}:/debs \
    --tag ${os_version}:install \
    --file Dockerfile.${os_version}.install_and_test .

