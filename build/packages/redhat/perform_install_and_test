#! /bin/bash

###########################################################
# install rpm from within a container and test it
# $1: os_type, e.g. centos
# $2: os_version, e.g. 7
# $3: lrose_pkg, e.g. core

os_type=$1
os_version=$2
lrose_pkg=$3

echo "Installing RPM and testing"
echo "  os_type: ${os_type}"
echo "  os_version: ${os_version}"
echo "  lrose_pkg: ${lrose_pkg}"

# for centos, install epel release

if [ "$os_type" = centos ]; then
  echo "==>> install epel-release <<=="
  yum install -y epel-release
fi

# install the rpm

rpmPath=`ls /pkgs/*/*.rpm`
echo "  rpm: $rpmPath"

yum install -y ${rpmPath}

# check that RadxPrint runs

/usr/local/lrose/bin/RadxPrint -h
