BootStrap: localimage
From: /tmp/singularity/custom.centos:8.sif

%post
  mkdir git
  cd git
  git clone https://github.com/ncar/lrose-core
  /bin/rm -rf /tmp/singularity
  cd lrose-core/build
  ./checkout_and_build_auto.py \
    --package lrose-core \
    --releaseDate latest \
    --prefix /usr/local/lrose \
    --buildDir /tmp/singularity/lrose_build \
    --logDir /tmp/singularity/build_logs \
    --fractl --samurai --vortrac

%environment
  export LANG=C
  export PATH=/usr/local/lrose/bin:$PATH

%runscript
  csh

%labels
  Mike Dixon
