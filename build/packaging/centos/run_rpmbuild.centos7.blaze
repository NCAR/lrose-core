#! /bin/csh

#
# build blaze in centos7 image
#

cd ~/git/lrose-core/build/packaging/centos

docker build \
    --tag centos7:blaze \
    --file Dockerfile.centos7.build.blaze .

# build hierarchy for rpmbuild:

RUN \
    cd ${HOME}; \
    mkdir rpmbuild; \
    cd rpmbuild; \
    mkdir BUILD RPMS SOURCES SPECS SRPMS; \
    cp ~/git/lrose-core/build/packaging/centos/rpmbuild-blaze.spec SPECS

# build the rpm

RUN \
    cd ${HOME}/rpmbuild; \
    rpmbuild -v -bb ./SPECS/rpmbuild-blaze.spec

